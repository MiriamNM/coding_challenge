{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.208.0"},"children":{"NotesAppStack":{"id":"NotesAppStack","path":"NotesAppStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.208.0"},"children":{"NotesTable":{"id":"NotesTable","path":"NotesAppStack/NotesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.208.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NotesAppStack/NotesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"},{"attributeName":"dateCreated","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"},{"attributeName":"dateCreated","keyType":"RANGE"}],"tableName":"Notes"}}},"ScalingRole":{"id":"ScalingRole","path":"NotesAppStack/NotesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}}}},"NotesAPI":{"id":"NotesAPI","path":"NotesAppStack/NotesAPI","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.208.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NotesAppStack/NotesAPI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"authenticationType":"API_KEY","name":"notes-api","xrayEnabled":true}}},"Schema":{"id":"Schema","path":"NotesAppStack/NotesAPI/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesAPIAA73EE2D","ApiId"]},"definition":"enum Sentiment {\n  happy\n  sad\n  neutral\n  angry\n}\n\ntype Note {\n  id: ID!\n  text: String!\n  sentiment: Sentiment!\n  dateCreated: AWSDateTime!\n}\n\ntype NoteQueryResults {\n  items: [Note]\n  nextToken: String\n  scannedCount: Int\n}\n\ntype Query {\n  getNotes(sentiment: Sentiment, limit: Int, nextToken: String): NoteQueryResults\n}\n\ntype Mutation {\n  createNote(text: String!, sentiment: Sentiment!): Note\n}\n\nschema {\n  query: Query\n  mutation: Mutation\n} "}}},"DefaultApiKey":{"id":"DefaultApiKey","path":"NotesAppStack/NotesAPI/DefaultApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnApiKey","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::ApiKey","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesAPIAA73EE2D","ApiId"]}}}},"LogGroup":{"id":"LogGroup","path":"NotesAppStack/NotesAPI/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}},"NotesDataSource":{"id":"NotesDataSource","path":"NotesAppStack/NotesAPI/NotesDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.DynamoDbDataSource","version":"2.208.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"NotesAppStack/NotesAPI/NotesDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.208.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NotesAppStack/NotesAPI/NotesDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}},"Resource":{"id":"Resource","path":"NotesAppStack/NotesAPI/NotesDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NotesAppStack/NotesAPI/NotesDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.208.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NotesAppStack/NotesAPI/NotesDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["NotesTableD0D0D2F1","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"NotesAPINotesDataSourceServiceRoleDefaultPolicyDED89368","roles":[{"Ref":"NotesAPINotesDataSourceServiceRoleE5F2E760"}]}}}}}}},"Resource":{"id":"Resource","path":"NotesAppStack/NotesAPI/NotesDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesAPIAA73EE2D","ApiId"]},"dynamoDbConfig":{"tableName":{"Ref":"NotesTableD0D0D2F1"},"awsRegion":"us-east-1"},"name":"NotesDataSource","serviceRoleArn":{"Fn::GetAtt":["NotesAPINotesDataSourceServiceRoleE5F2E760","Arn"]},"type":"AMAZON_DYNAMODB"}}}}},"CreateNoteResolver":{"id":"CreateNoteResolver","path":"NotesAppStack/NotesAPI/CreateNoteResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.208.0"},"children":{"Resource":{"id":"Resource","path":"NotesAppStack/NotesAPI/CreateNoteResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesAPIAA73EE2D","ApiId"]},"dataSourceName":"NotesDataSource","fieldName":"createNote","kind":"UNIT","requestMappingTemplate":"\n                {\n                    \"version\": \"2017-02-28\",\n                    \"operation\": \"PutItem\",\n                    \"key\": {\n                        \"id\": $util.dynamodb.toDynamoDBJson($util.autoId()),\n                        \"dateCreated\": $util.dynamodb.toDynamoDBJson($util.time.nowISO8601())\n                    },\n                    \"attributeValues\": {\n                        \"text\": $util.dynamodb.toDynamoDBJson($ctx.args.text),\n                        \"sentiment\": $util.dynamodb.toDynamoDBJson($ctx.args.sentiment)\n                    }\n                }\n            ","responseMappingTemplate":"\n                $util.toJson($ctx.result)\n            ","typeName":"Mutation"}}}}},"GetNotesResolver":{"id":"GetNotesResolver","path":"NotesAppStack/NotesAPI/GetNotesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.208.0"},"children":{"Resource":{"id":"Resource","path":"NotesAppStack/NotesAPI/GetNotesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesAPIAA73EE2D","ApiId"]},"dataSourceName":"NotesDataSource","fieldName":"getNotes","kind":"UNIT","requestMappingTemplate":"\n                {\n                    \"version\": \"2017-02-28\",\n                    \"operation\": \"Query\",\n                    \"limit\": $util.defaultIfNull($ctx.args.limit, 10),\n                    #if($ctx.args.nextToken)\n                        \"nextToken\": \"$ctx.args.nextToken\",\n                    #end\n                    #if($ctx.args.sentiment)\n                        \"filter\": {\n                            \"sentiment\": {\n                                \"eq\": \"$ctx.args.sentiment\"\n                            }\n                        }\n                    #end\n                }\n            ","responseMappingTemplate":"\n                {\n                    \"items\": $util.toJson($ctx.result.items),\n                    \"nextToken\": $util.toJson($util.defaultIfNull($ctx.result.nextToken, null)),\n                    \"scannedCount\": $util.toJson($ctx.result.scannedCount)\n                }\n            ","typeName":"Query"}}}}}}},"GraphQLAPIURL":{"id":"GraphQLAPIURL","path":"NotesAppStack/GraphQLAPIURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.208.0"}},"GraphQLAPIKey":{"id":"GraphQLAPIKey","path":"NotesAppStack/GraphQLAPIKey","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.208.0"}},"DynamoDBTableName":{"id":"DynamoDBTableName","path":"NotesAppStack/DynamoDBTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.208.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"NotesAppStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"NotesAppStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.208.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"NotesAppStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.208.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"NotesAppStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.208.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}